<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AMC Renewal Notice</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: "Arial", sans-serif;
            background-color: #f4f4f4;
            color: #333;
        }

        .email-container {
            max-width: 700px;
            margin: 0 auto;
            background-color: #ffffff;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .header {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            padding: 25px 30px;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .renewal-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            position: relative;
            z-index: 2;
        }

        .renewal-icon {
            font-size: 48px;
            animation: rotate 3s linear infinite;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .renewal-content {
            text-align: left;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .company-name {
            font-size: 24px;
            font-weight: bold;
            margin: 0;
            letter-spacing: 1px;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }

        .subtitle {
            font-size: 14px;
            opacity: 0.9;
            margin: 5px 0 0;
            font-weight: 500;
        }

        .content {
            padding: 40px 30px;
        }

        .renewal-badge {
            display: inline-block;
            background-color: #27ae60;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
            margin-bottom: 20px;
        }

        .greeting {
            font-size: 16px;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .message {
            font-size: 15px;
            line-height: 1.7;
            margin-bottom: 30px;
            color: #555;
        }

        .items-table {
            width: 100%;
            border-collapse: collapse;
            margin: 25px 0;
            background-color: #fafafa;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .items-table th {
            background-color: #34495e;
            color: white;
            padding: 15px 10px;
            text-align: left;
            font-weight: 600;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .items-table td {
            padding: 15px 10px;
            border-bottom: 1px solid #e0e0e0;
            font-size: 13px;
            vertical-align: top;
        }

        .items-table tr:last-child td {
            border-bottom: none;
        }

        .items-table tr:nth-child(even) {
            background-color: #ffffff;
        }

        .status-urgent {
            color: #e74c3c;
            font-weight: bold;
        }

        .status-reminder {
            color: #f39c12;
            font-weight: bold;
        }

        .status-notice {
            color: #3498db;
            font-weight: bold;
        }

        .action-section {
            background-color: #e8f6f3;
            padding: 25px;
            margin: 30px 0;
            border-left: 4px solid #27ae60;
            border-radius: 0 8px 8px 0;
        }

        .action-title {
            font-size: 16px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .action-text {
            font-size: 14px;
            line-height: 1.6;
            color: #555;
        }

        .footer {
            background-color: #2c3e50;
            color: #bdc3c7;
            padding: 30px;
            text-align: center;
            font-size: 13px;
            line-height: 1.6;
        }

        .footer-title {
            color: white;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .contact-info {
            margin: 15px 0;
        }

        .contact-info a {
            color: #3498db;
            text-decoration: none;
        }

        .priority-urgent {
            background-color: #ffebee;
            border-left: 4px solid #f44336;
        }

        .priority-reminder {
            background-color: #fff3e0;
            border-left: 4px solid #ff9800;
        }

        .priority-notice {
            background-color: #e3f2fd;
            border-left: 4px solid #2196f3;
        }

        /* Enhanced Mobile Responsiveness */
        @media only screen and (max-width: 600px) {
            .email-container {
                width: 100% !important;
                margin: 0 !important;
            }

            .header {
                padding: 20px 15px !important;
            }

            .renewal-header {
                flex-direction: column !important;
                gap: 10px !important;
            }

            .renewal-content {
                text-align: center !important;
            }

            .renewal-icon {
                font-size: 36px !important;
            }

            .content {
                padding: 20px 15px !important;
            }

            .action-section {
                padding: 20px 15px !important;
                margin: 20px 0 !important;
            }

            .footer {
                padding: 20px 15px !important;
            }

            .company-name {
                font-size: 18px !important;
                line-height: 1.2 !important;
            }

            .greeting {
                font-size: 15px !important;
            }

            .message {
                font-size: 14px !important;
            }

            /* Mobile Table as Cards */
            .table-container {
                margin: 20px 0 !important;
            }

            .items-table {
                display: block !important;
                width: 100% !important;
                border: none !important;
                background: transparent !important;
                box-shadow: none !important;
            }

            .items-table thead {
                display: none !important;
            }

            .items-table tbody {
                display: block !important;
            }

            .items-table tr {
                display: block !important;
                margin-bottom: 15px !important;
                padding: 20px !important;
                background-color: white !important;
                border-radius: 12px !important;
                box-shadow: 0 3px 8px rgba(0, 0, 0, 0.12) !important;
                border: 1px solid #e0e0e0 !important;
                position: relative !important;
            }

            .items-table td {
                display: block !important;
                padding: 8px 0 !important;
                border: none !important;
                font-size: 14px !important;
                line-height: 1.4 !important;
                text-align: left !important;
            }

            .items-table td:before {
                content: attr(data-label) ": " !important;
                font-weight: bold !important;
                color: #34495e !important;
                display: inline-block !important;
                width: auto !important;
                margin-right: 5px !important;
                font-size: 13px !important;
            }

            .items-table td:last-child {
                margin-top: 10px !important;
                padding-top: 10px !important;
                border-top: 1px solid #f0f0f0 !important;
            }

            /* Status styling for mobile */
            .items-table td[data-label="Status"] {
                text-align: center !important;
                padding: 8px 12px !important;
                border-radius: 20px !important;
                font-weight: bold !important;
                font-size: 12px !important;
                text-transform: uppercase !important;
                letter-spacing: 0.5px !important;
            }

            .priority-urgent .items-table td[data-label="Status"] {
                background-color: #ffebee !important;
                color: #c62828 !important;
                border: 1px solid #ffcdd2 !important;
            }

            .priority-reminder .items-table td[data-label="Status"] {
                background-color: #fff3e0 !important;
                color: #ef6c00 !important;
                border: 1px solid #ffcc02 !important;
            }

            .priority-notice .items-table td[data-label="Status"] {
                background-color: #e3f2fd !important;
                color: #1565c0 !important;
                border: 1px solid #bbdefb !important;
            }
        }

        @media only screen and (max-width: 480px) {
            .renewal-badge {
                font-size: 11px !important;
                padding: 6px 12px !important;
            }

            .action-title {
                font-size: 15px !important;
            }

            .action-text {
                font-size: 13px !important;
            }

            .items-table tr {
                padding: 15px !important;
            }

            .items-table td {
                font-size: 13px !important;
                padding: 6px 0 !important;
            }

            .items-table td:before {
                font-size: 12px !important;
            }

            .items-table td[data-label="Status"] {
                font-size: 11px !important;
                padding: 6px 10px !important;
            }
        }
    </style>
</head>

<body>
    <div class="email-container">
        <!-- Header -->
        <div class="header">
            <div class="renewal-header">
                <div class="renewal-icon">🔄</div>
                <div class="renewal-content">
                    <h1 class="company-name">GLOBAL TECHNICAL INSTITUTE</h1>
                    <p class="subtitle">AMC Renewal Notification System</p>
                </div>
            </div>
        </div>

        <!-- Content -->
        <div class="content">
            <div class="renewal-badge">📋 AMC Renewal Notice</div>

            <div class="greeting">
                Dear <strong>
                    <%= recipientName || 'Valued Client' %>
                </strong>,
            </div>

            <div class="message">
                We hope this email finds you well. This is a friendly notification
                from our AMC (Annual Maintenance Contract) monitoring system to remind
                you about upcoming contract renewals that require your attention.
            </div>

            <% if (items && items.length> 0) { %>
                <div class="table-container">
                    <table class="items-table">
                        <thead>
                            <tr>
                                <th>Company Name</th>
                                <th>Item Name</th>
                                <th>Renewal Due Date</th>
                                <th>Days Until Renewal</th>
                                <th>Priority</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% items.forEach(function(item) { 
                                let statusClass = '' ; 
                                let statusText = '' ; 
                                let rowClass = '' ;
                                
                                if (item.daysRemaining < 0) { 
                                    statusClass = 'status-urgent' ; 
                                    statusText = 'OVERDUE' ;
                                    rowClass = 'priority-urgent' ; 
                                } else if (item.daysRemaining <= 7) {
                                    statusClass = 'status-urgent' ; 
                                    statusText = 'URGENT' ; 
                                    rowClass = 'priority-urgent' ; 
                                } else if (item.daysRemaining <= 30) { 
                                    statusClass = 'status-reminder' ; 
                                    statusText = 'REMINDER' ; 
                                    rowClass = 'priority-reminder' ; 
                                } else { 
                                    statusClass = 'status-notice' ;
                                    statusText = 'NOTICE' ; 
                                    rowClass = 'priority-notice' ; 
                                } 
                            %>
                                <tr class="<%= rowClass %>">
                                    <td data-label="Company Name">
                                        <strong><%= item.companyName %></strong>
                                    </td>
                                    <td data-label="Item Name">
                                        <strong><%= item.name %></strong>
                                    </td>
                                    <td data-label="Renewal Due Date">
                                        <%= new Date(item.renewalDate).toLocaleDateString('en-GB', { 
                                            day: '2-digit', 
                                            month: 'short', 
                                            year: 'numeric' 
                                        }) %>
                                    </td>
                                    <td data-label="Days Until Renewal">
                                        <% if (item.daysRemaining < 0) { %>
                                            <%= Math.abs(item.daysRemaining) %> days overdue 
                                        <% } else if (item.daysRemaining === 0) { %> 
                                            Renewal due today 
                                        <% } else { %>
                                            <%= item.daysRemaining %> days remaining 
                                        <% } %>
                                    </td>
                                    <td data-label="Priority" class="<%= statusClass %>">
                                        <%= statusText %>
                                    </td>
                                </tr>
                            <% }); %>
                        </tbody>
                    </table>
                </div>
            <% } %>

            <div class="action-section">
                <div class="action-title">📞 Renewal Action Plan</div>
                <div class="action-text">
                    Please reach out to the respective companies to initiate the AMC renewal process. 
                    We recommend starting renewal discussions at least 30 days before the due date to ensure 
                    uninterrupted service coverage. Our system will continue to track these renewals and send 
                    timely reminders as the dates approach.
                </div>
            </div>

            <div class="message">
                <strong>CRM System Note:</strong> This renewal notification has been automatically generated 
                based on the AMC renewal dates in our database. Please ensure all client communications 
                regarding renewals are properly documented and follow-up actions are scheduled in the system.
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="footer-title">GLOBAL TECHNICAL INSTITUTE - CRM SYSTEM</div>
            <div style="font-size: 11px; margin-top: 15px;">
                This is an automated renewal notification from our CRM AMC monitoring system.<br />
                Generated on <%= generatedTime %> | For internal use only
            </div>
        </div>
    </div>
</body>

</html>